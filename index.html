<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Roata Premiilor – Shaormeria 5 Drumuri</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    /* -------------------- GLOBAL -------------------- */
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Montserrat', system-ui, sans-serif;
      background: radial-gradient(circle at top, #1a0000, #000);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .container {
      max-width: 900px;
      width: 100%;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 30px;
      align-items: center;
    }

    /* -------------------- LOADER -------------------- */
    .loader-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .loader-box {
      position: relative;
      text-align: center;
    }

    .loader-logo {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      box-shadow: 0 0 25px #ff1a1a;
      object-fit: cover;
    }

    .loader-ring {
      margin: 20px auto 0;
      width: 70px;
      height: 70px;
      border: 4px solid #ff1a1a;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spinRing 1s linear infinite;
      box-shadow: 0 0 20px #ff1a1a;
    }

    @keyframes spinRing {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .loader-hide {
      opacity: 0;
      transition: opacity 0.6s ease-out;
      pointer-events: none;
    }

    /* -------------------- HEADER PREMIUM -------------------- */
    .premium-header {
      width: 100%;
      text-align: center;
      padding: 25px 10px 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .header-logo {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      box-shadow: 0 0 20px #ff1a1a;
      margin-bottom: 10px;
    }

    .header-title {
      font-size: 28px;
      font-weight: 900;
      color: #ff1a1a;
      text-shadow: 0 0 12px #ff1a1a;
      letter-spacing: 2px;
    }

    .header-sub {
      font-size: 14px;
      color: #ff6a00;
      text-shadow: 0 0 10px #ff6a00;
      letter-spacing: 3px;
      margin-top: 4px;
      text-transform: uppercase;
    }

    /* -------------------- STEPS -------------------- */
    .steps {
      background: rgba(20, 0, 0, 0.7);
      border: 1px solid #ff1a1a55;
      border-radius: 12px;
      padding: 20px;
      backdrop-filter: blur(6px);
      box-shadow: 0 0 20px #ff1a1a33;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .steps h2 {
      margin: 0 0 10px;
      font-size: 20px;
      color: #ff1a1a;
      text-shadow: 0 0 10px #ff1a1a;
    }

    .step-item {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin: 8px 0;
      font-size: 15px;
      flex-wrap: wrap;
    }

    .step-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    .step-item label {
      min-width: 200px;
      text-align: left;
    }

    .status {
      font-size: 14px;
      margin-top: 10px;
    }

    .status.ready {
      color: #4caf50;
      font-weight: 700;
      text-shadow: 0 0 10px #4caf50;
    }

    .social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 38px;
      height: 38px;
      border-radius: 50%;
      box-shadow: 0 0 10px #1877f2;
      flex-shrink: 0;
    }

    .social-btn img {
      width: 22px;
      height: 22px;
      object-fit: contain;
    }

    .social-fb {
      background: #1877f2;
    }

    .social-fb img {
      filter: brightness(0) invert(1);
    }

    .social-tt {
      background: #000;
      box-shadow: 0 0 10px #ff0050;
    }

    /* -------------------- WHEEL + ARCADE THEME -------------------- */
    @keyframes electricSparks {
      0% { filter: drop-shadow(0 0 6px #ff1a1a); }
      20% { filter: drop-shadow(0 0 14px #ff6a00); }
      40% { filter: drop-shadow(0 0 20px #ffe600); }
      60% { filter: drop-shadow(0 0 14px #ff6a00); }
      80% { filter: drop-shadow(0 0 6px #ff1a1a); }
      100% { filter: drop-shadow(0 0 10px #ff1a1a); }
    }

    @keyframes arcadeGlow {
      0% { box-shadow: 0 0 25px #ff1a1a; }
      50% { box-shadow: 0 0 55px #ff6a00; }
      100% { box-shadow: 0 0 25px #ff1a1a; }
    }

    .wheel-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .wheel-wrapper {
      position: relative;
      width: 360px;
      height: 360px;
      padding: 20px;
      border-radius: 50%;
      background: radial-gradient(circle, #330000, #000);
      border: 6px solid #ff1a1a;
      box-shadow:
        0 0 25px #ff1a1a,
        0 0 45px #ff6a00 inset,
        0 0 60px #ff1a1a inset;
      animation: arcadeGlow 3s infinite ease-in-out;
    }

    .wheel-wrapper::before {
      content: "";
      position: absolute;
      top: 6px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 20px;
      background: linear-gradient(to bottom, rgba(255,255,255,0.4), transparent);
      border-radius: 50%;
      filter: blur(8px);
      pointer-events: none;
    }

    .wheel {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 6px solid #ff1a1a;
      overflow: hidden;
      transition: transform 4s cubic-bezier(0.25, 0.1, 0.1, 1);
      background: conic-gradient(
        #1a1a1a 0deg 60deg,
        #330000 60deg 120deg,
        #1a1a1a 120deg 180deg,
        #330000 180deg 240deg,
        #1a1a1a 240deg 300deg,
        #330000 300deg 360deg
      );
      animation: electricSparks 2.2s infinite ease-in-out;
      position: relative;
    }

    .wheel-label {
      position: absolute;
      width: 50%;
      left: 50%;
      top: 50%;
      transform-origin: 0% 0%;
      color: #fff;
      font-size: 14px;
      font-weight: 700;
      text-shadow: 0 0 8px #000;
    }

    .wheel-label span {
      display: inline-block;
      transform: translate(-50%, -150%);
    }

    @keyframes logoPulse {
      0% { box-shadow: 0 0 10px #ff1a1a; }
      50% { box-shadow: 0 0 25px #ff6a00; }
      100% { box-shadow: 0 0 10px #ff1a1a; }
    }

    .wheel-center-logo {
      position: absolute;
      width: 110px;
      height: 110px;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      border: 4px solid #ff1a1a;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      object-fit: contain;
      animation: logoPulse 2.5s infinite ease-in-out;
    }

    @keyframes pointerGlow {
      0% { filter: drop-shadow(0 0 6px #ff6a00); }
      50% { filter: drop-shadow(0 0 16px #ff1a1a); }
      100% { filter: drop-shadow(0 0 6px #ff6a00); }
    }

    .pointer {
      position: absolute;
      top: -18px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 28px solid #ff6a00;
      animation: pointerGlow 2s infinite ease-in-out;
      z-index: 20;
    }

    @keyframes wheelBounce {
      0% { transform: scale(1); }
      40% { transform: scale(1.06); }
      70% { transform: scale(0.97); }
      100% { transform: scale(1); }
    }

    .wheel.bounce {
      animation: wheelBounce 0.6s ease-out;
    }

    /* -------------------- BUTTONS -------------------- */
    #spinBtn {
      padding: 14px 22px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #330000, #1a0000);
      color: #777;
      font-size: 16px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 1px;
      cursor: not-allowed;
      transition: 0.2s;
      margin-top: 10px;
    }

    #spinBtn.enabled {
      background: linear-gradient(135deg, #ff1a1a, #ff6a00);
      color: #fff;
      cursor: pointer;
      box-shadow: 0 0 20px #ff1a1a;
    }

    #spinBtn.enabled:active {
      transform: scale(0.96);
      box-shadow: 0 0 10px #ff1a1a;
    }

    .rules-btn {
      margin-top: 10px;
      padding: 10px 20px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #330000, #1a0000);
      color: #ff6a00;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 12px #ff6a00;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .rules-btn:active {
      transform: scale(0.96);
    }

    .result {
      font-size: 18px;
      color: #ffeb3b;
      font-weight: 700;
      text-shadow: 0 0 10px #ffeb3b;
      text-align: center;
      margin-top: 10px;
    }

    /* -------------------- POPUP REGULAMENT / GENERIC -------------------- */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .popup-box {
      background: rgba(20,0,0,0.8);
      border: 1px solid #ff1a1a55;
      box-shadow: 0 0 25px #ff1a1a;
      padding: 25px;
      border-radius: 12px;
      width: 90%;
      max-width: 380px;
      text-align: center;
      backdrop-filter: blur(6px);
    }

    .popup-box h2 {
      color: #ff1a1a;
      text-shadow: 0 0 12px #ff1a1a;
      margin-top: 0;
    }

    .popup-box p {
      color: #ffeb3b;
      font-size: 15px;
      line-height: 1.5;
    }

    .popup-close {
      margin-top: 20px;
      padding: 10px 20px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #ff1a1a, #ff6a00);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 12px #ff1a1a;
    }

    /* -------------------- WIN SCREEN -------------------- */
    .win-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 99999;
    }

    .win-box {
      background: rgba(20,0,0,0.8);
      border: 1px solid #ff1a1a55;
      padding: 30px;
      border-radius: 14px;
      text-align: center;
      width: 90%;
      max-width: 380px;
      box-shadow: 0 0 25px #ff1a1a;
      backdrop-filter: blur(6px);
      animation: winPop 0.6s ease-out;
    }

    @keyframes winPop {
      0% { transform: scale(0.6); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); }
    }

    .win-title {
      font-size: 34px;
      color: #ff1a1a;
      text-shadow: 0 0 18px #ff1a1a, 0 0 30px #ff6a00;
      margin-bottom: 10px;
    }

    .win-text {
      font-size: 18px;
      color: #ffeb3b;
      text-shadow: 0 0 10px #ffeb3b;
      margin-bottom: 20px;
    }

    .win-close {
      padding: 12px 20px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #ff1a1a, #ff6a00);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 12px #ff1a1a;
    }

    /* -------------------- CONFETTI CANVAS -------------------- */
    #confettiCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9998;
    }

    /* -------------------- SCREEN SHAKE -------------------- */
    @keyframes screenShake {
      0% { transform: translate(0, 0); }
      20% { transform: translate(-8px, 4px); }
      40% { transform: translate(6px, -6px); }
      60% { transform: translate(-4px, 4px); }
      80% { transform: translate(4px, -2px); }
      100% { transform: translate(0, 0); }
    }

    .shake-screen {
      animation: screenShake 0.4s ease-out;
    }

    /* -------------------- FOOTER NEON -------------------- */
    .neon-footer {
      width: 100%;
      text-align: center;
      padding: 15px 0;
      margin-top: 40px;
      background: rgba(20, 0, 0, 0.7);
      border-top: 1px solid #ff1a1a55;
      box-shadow: 0 -4px 20px #ff1a1a55;
    }

    .neon-footer p {
      margin: 0;
      color: #ff6a00;
      font-size: 13px;
      text-shadow: 0 0 8px #ff6a00;
    }

    /* -------------------- RESPONSIVE -------------------- */
    @media (max-width: 480px) {
      .header-title { font-size: 22px; }
      .header-sub { font-size: 12px; }

      .wheel-wrapper {
        width: 280px;
        height: 280px;
      }

      .step-item {
        flex-direction: column;
        gap: 8px;
      }

      .step-item label {
        text-align: center;
        min-width: auto;
      }

      .rules-btn, #spinBtn {
        width: 100%;
        max-width: 260px;
      }
    }
  </style>
</head>

<body>

  <!-- LOADER -->
  <div id="loader" class="loader-overlay">
    <div class="loader-box">
      <img src="logo.png" class="loader-logo" alt="Logo">
      <div class="loader-ring"></div>
    </div>
  </div>

  <!-- HEADER -->
  <header class="premium-header">
    <img src="logo.png" class="header-logo" alt="Shaormeria 5 Drumuri">
    <div class="header-title">SHAORMERIA 5 DRUMURI</div>
    <div class="header-sub">ROATA PREMIILOR</div>
  </header>

  <main class="container">

    <!-- STEPS -->
    <section class="steps">
      <h2>1. Pași obligatorii pentru a juca</h2>

      <div class="step-item">
        <input type="checkbox" id="fbLike">
        <label for="fbLike">Am dat like paginii de Facebook</label>
        <a href="https://www.facebook.com/Saormariefastfoodandgrill/" target="_blank"
           class="social-btn social-fb">
          <img src="https://upload.wikimedia.org/wikipedia/commons/1/1b/Facebook_icon.svg" alt="Facebook">
        </a>
      </div>

      <div class="step-item">
        <input type="checkbox" id="ttFollow">
        <label for="ttFollow">Urmăresc contul de TikTok</label>
        <a href="https://www.tiktok.com/@saormarie5drumuri?_r=1&_t=ZN-937Qj9sbZkE" target="_blank"
           class="social-btn social-tt">
          <img src="https://upload.wikimedia.org/wikipedia/en/a/a9/TikTok_logo.svg" alt="TikTok">
        </a>
      </div>

      <div id="status" class="status">
        Bifează ambii pași pentru a debloca roata premiilor.
      </div>
    </section>

    <!-- WHEEL -->
    <section class="wheel-section">
      <div class="wheel-wrapper">
        <div class="pointer"></div>

        <img src="logo.png" class="wheel-center-logo" alt="Logo">

        <div id="wheel" class="wheel">
          <div class="wheel-label" style="transform: rotate(0deg);">
            <span>SHAORMA MARE</span>
          </div>
          <div class="wheel-label" style="transform: rotate(60deg);">
            <span>BAUTURĂ</span>
          </div>
          <div class="wheel-label" style="transform: rotate(120deg);">
            <span>DESERT</span>
          </div>
          <div class="wheel-label" style="transform: rotate(180deg);">
            <span>-20% NOTA</span>
          </div>
          <div class="wheel-label" style="transform: rotate(240deg);">
            <span>SHAORMA MICĂ</span>
          </div>
          <div class="wheel-label" style="transform: rotate(300deg);">
            <span>SOS</span>
          </div>
        </div>
      </div>

      <button id="spinBtn">Deblochează roata</button>
      <button id="rulesBtn" class="rules-btn">Regulament</button>

      <div id="result" class="result"></div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="neon-footer">
    <p>© 2025 Shaormeria 5 Drumuri • Toate drepturile rezervate</p>
  </footer>

  <!-- POPUP REGULAMENT -->
  <div id="popupOverlay" class="popup-overlay">
    <div class="popup-box">
      <h2 id="popupTitle">Regulament</h2>
      <p id="popupContent">
        • Fiecare participant poate juca o singură dată pe zi.<br>
        • Premiile se revendică doar în locație.<br>
        • Codul QR trebuie prezentat la tejghea.<br>
        • Ne rezervăm dreptul de a invalida tentativele de abuz.
      </p>
      <button class="popup-close" onclick="closePopup()">Închide</button>
    </div>
  </div>

  <!-- WIN SCREEN -->
  <div id="winScreen" class="win-screen">
    <div class="win-box">
      <h1 class="win-title">FELICITĂRI!</h1>
      <p class="win-text" id="winText"></p>
      <button class="win-close" onclick="closeWinScreen()">OK</button>
    </div>
  </div>

  <!-- CONFETTI CANVAS -->
  <canvas id="confettiCanvas"></canvas>

  <script>
    /* -------------------- LOADER -------------------- */
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("loader").classList.add("loader-hide");
      }, 800);
    });

    /* -------------------- ELEMENTE -------------------- */
    const fbLike = document.getElementById("fbLike");
    const ttFollow = document.getElementById("ttFollow");
    const statusEl = document.getElementById("status");
    const spinBtn = document.getElementById("spinBtn");
    const wheel = document.getElementById("wheel");
    const resultEl = document.getElementById("result");

    let isSpinning = false;
    let currentRotation = 0;

    const prizes = [
      "SHAORMA MARE",
      "BAUTURĂ",
      "DESERT",
      "-20% NOTA",
      "SHAORMA MICĂ",
      "SOS"
    ];

    /* -------------------- SUNET CLICK -------------------- */
    function playTick() {
      const ctx = new AudioContext();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();

      osc.frequency.value = 900;
      gain.gain.value = 0.1;

      osc.connect(gain);
      gain.connect(ctx.destination);

      osc.start();
      osc.stop(ctx.currentTime + 0.05);
    }

    function startTicking() {
      let ticks = 40;
      let interval = 60;

      function tickLoop() {
        playTick();
        interval += 8;
        ticks--;

        if (ticks > 0) {
          setTimeout(tickLoop, interval);
        }
      }

      tickLoop();
    }

    /* -------------------- SUNETE WIN -------------------- */
    const winSound = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_3f0e3b824c.mp3?filename=success-1-6297.mp3");
    const customWinSound = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_3f0e3b824c.mp3?filename=success-1-6297.mp3");

    /* -------------------- ANTI-ABUZ -------------------- */
    const today = new Date().toLocaleDateString("ro-RO");
    const lastPlay = localStorage.getItem("lastPlayDate");

    if (lastPlay === today) {
      spinBtn.disabled = true;
      spinBtn.textContent = "Ai jucat deja azi";
    }

    spinBtn.addEventListener("click", () => {
      localStorage.setItem("lastPlayDate", today);
    });

    /* -------------------- DEBLOCARE -------------------- */
    function checkSteps() {
      if (fbLike.checked && ttFollow.checked) {
        statusEl.textContent = "Perfect! Poți învârti roata.";
        statusEl.classList.add("ready");
        spinBtn.textContent = "Învarte roata";
        spinBtn.classList.add("enabled");
        spinBtn.disabled = false;
      } else {
        statusEl.textContent = "Bifează ambii pași pentru a juca.";
        statusEl.classList.remove("ready");
        spinBtn.textContent = "Deblochează roata";
        spinBtn.classList.remove("enabled");
        spinBtn.disabled = true;
      }
    }

    fbLike.addEventListener("change", checkSteps);
    ttFollow.addEventListener("change", checkSteps);

    /* -------------------- COD UNIC -------------------- */
    function generatePrizeCode() {
      return "PRM-" + Math.floor(100000 + Math.random() * 900000);
    }

    /* -------------------- QR -------------------- */
    function generateQR(code) {
      const url = `https://siteultau.ro/revendica.html?cod=${code}`;
      return `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(url)}`;
    }

    /* -------------------- POPUP REGULAMENT -------------------- */
    document.getElementById("rulesBtn").addEventListener("click", () => {
      document.getElementById("popupTitle").textContent = "Regulament";
      document.getElementById("popupContent").innerHTML = `
        • Fiecare participant poate juca o singură dată pe zi.<br>
        • Premiile se revendică doar în locație.<br>
        • Codul QR trebuie prezentat la tejghea.<br>
        • Ne rezervăm dreptul de a invalida tentativele de abuz.
      `;
      document.getElementById("popupOverlay").style.display = "flex";
    });

    function closePopup() {
      document.getElementById("popupOverlay").style.display = "none";
    }

    /* -------------------- WIN SCREEN -------------------- */
    function showWinScreen(prize, code) {
      document.getElementById("winText").innerHTML =
        `Ai câștigat <strong>${prize}</strong><br>Cod: <strong>${code}</strong>`;
      document.getElementById("winScreen").style.display = "flex";

      // Confetti, sunet, vibrație, shake
      launchConfetti();
      winSound.currentTime = 0;
      winSound.play();
      customWinSound.currentTime = 0;
      customWinSound.play();

      if (navigator.vibrate) {
        navigator.vibrate([120, 80, 120]);
      }

      document.body.classList.add("shake-screen");
      setTimeout(() => document.body.classList.remove("shake-screen"), 400);
    }

    function closeWinScreen() {
      document.getElementById("winScreen").style.display = "none";
    }

    /* -------------------- CONFETTI -------------------- */
    const confettiCanvas = document.getElementById("confettiCanvas");
    const ctx = confettiCanvas.getContext("2d");

    function resizeConfetti() {
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    resizeConfetti();
    window.addEventListener("resize", resizeConfetti);

    let confettiPieces = [];

    function launchConfetti() {
      confettiPieces = [];

      for (let i = 0; i < 120; i++) {
        confettiPieces.push({
          x: Math.random() * confettiCanvas.width,
          y: Math.random() * -50,
          size: Math.random() * 8 + 4,
          color: ["#ff1a1a", "#ff6a00", "#ffe600", "#ffffff"][Math.floor(Math.random() * 4)],
          speed: Math.random() * 3 + 2,
          angle: Math.random() * 360
        });
      }

      animateConfetti();
    }

    function animateConfetti() {
      ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

      confettiPieces.forEach((p) => {
        p.y += p.speed;
        p.angle += 5;

        ctx.fillStyle = p.color;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate((p.angle * Math.PI) / 180);
        ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
        ctx.restore();
      });

      confettiPieces = confettiPieces.filter((p) => p.y < confettiCanvas.height + 50);

      if (confettiPieces.length > 0) {
        requestAnimationFrame(animateConfetti);
      }
    }

    /* -------------------- ROTIRE ROATĂ -------------------- */
    spinBtn.addEventListener("click", () => {
      if (!spinBtn.classList.contains("enabled") || isSpinning) return;

      isSpinning = true;
      resultEl.textContent = "";
      startTicking();

      const sectorCount = prizes.length;
      const sectorAngle = 360 / sectorCount;

      const randomSector = Math.floor(Math.random() * sectorCount);
      const extraSpins = 5;

      const targetAngle =
        extraSpins * 360 +
        (360 - randomSector * sectorAngle - sectorAngle / 2);

      currentRotation = targetAngle;

      wheel.style.transform = `rotate(${currentRotation}deg)`;

      setTimeout(() => {
        const prize = prizes[randomSector];

        const code = generatePrizeCode();
        const qrUrl = generateQR(code);

        resultEl.innerHTML = `
          <div>Ai câștigat: <strong>${prize}</strong></div>
          <div>Cod premiu: <strong>${code}</strong></div>
          <img src="${qrUrl}" style="margin-top:10px; width:180px;">
          <p>Arată acest cod la tejghea pentru revendicare.</p>
        `;

        wheel.classList.add("bounce");
        setTimeout(() => wheel.classList.remove("bounce"), 600);

        const prizeData = JSON.parse(localStorage.getItem("prizes") || "[]");

        prizeData.push({
          code: code,
          prize: prize,
          date: new Date().toLocaleString("ro-RO"),
          claimed: false
        });

        localStorage.setItem("prizes", JSON.stringify(prizeData));

        showWinScreen(prize, code);

        isSpinning = false;
      }, 4000);
    });
  </script>

</body>
</html>


